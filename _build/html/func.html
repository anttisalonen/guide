

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2.8.1. Callbacks and anonymous functions &#8212; Software Development: A Pragmatic Approach 0.1 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2.8.2. Functional programming" href="func2.html" />
    <link rel="prev" title="2.8. Some concepts around functions" href="func_index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="func2.html" title="2.8.2. Functional programming"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="func_index.html" title="2.8. Some concepts around functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Software Development: A Pragmatic Approach 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch2_index.html" >2. Stage 1</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="func_index.html" accesskey="U">2.8. Some concepts around functions</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2.8.1. Callbacks and anonymous functions</a><ul>
<li><a class="reference internal" href="#functions-as-first-order-values">2.8.1.1. Functions as first order values</a></li>
<li><a class="reference internal" href="#callback">2.8.1.2. Callback</a><ul>
<li><a class="reference internal" href="#sorting-in-python">2.8.1.2.1. Sorting in Python</a></li>
<li><a class="reference internal" href="#sorting-in-c">2.8.1.2.2. Sorting in C</a></li>
<li><a class="reference internal" href="#callbacks-in-javascript">2.8.1.2.3. Callbacks in Javascript</a></li>
</ul>
</li>
<li><a class="reference internal" href="#anonymous-functions">2.8.1.3. Anonymous functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="func_index.html"
                        title="previous chapter">2.8. Some concepts around functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="func2.html"
                        title="next chapter">2.8.2. Functional programming</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/func.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="callbacks-and-anonymous-functions">
<h1>2.8.1. Callbacks and anonymous functions<a class="headerlink" href="#callbacks-and-anonymous-functions" title="Permalink to this headline">¶</a></h1>
<p>This chapter explains some concepts that will be needed later.</p>
<div class="section" id="functions-as-first-order-values">
<h2>2.8.1.1. Functions as first order values<a class="headerlink" href="#functions-as-first-order-values" title="Permalink to this headline">¶</a></h2>
<p>The concept of functions as first order values means that variables can have functions as values like any other type. Code speaks more than a thousand words so let’s take a look at an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">my_functions</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="nb">sum</span><span class="p">]</span>

<span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">my_functions</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">function</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
<p>This snippet defines two lists. The first one looks typical but the second has three functions in it: “min”, “max” and “sum”. All of these functions can take a list of numbers as input; they’ll return the smallest, largest and sum of the list respectively.</p>
<p><em>Exercise</em>: What do you think this code will print? Try it out.</p>
</div>
<div class="section" id="callback">
<h2>2.8.1.2. Callback<a class="headerlink" href="#callback" title="Permalink to this headline">¶</a></h2>
<p>A callback, put shortly, is a function that will be called back. It follows the Hollywood principle - “don’t call us, we will call you”. Let’s take another look at our at our example of sorting a list in Python.</p>
<div class="section" id="sorting-in-python">
<h3>2.8.1.2.1. Sorting in Python<a class="headerlink" href="#sorting-in-python" title="Permalink to this headline">¶</a></h3>
<p>Recall that we can read in our data of 10,000 functions to a list of lists, such that we have a list with 10,000 entries, each a list of three elements, e.g. [[6.44, -6.80, 5.87], …]. We can sort this list to get the first three elements like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>However, what if we wanted to sort by the third element in the inner lists, i.e. by the value “c” in the functions? The function “sorted” supports this by allowing us to supply a <em>callback</em> function which will be called for each element, such that the return value of the function defines the ordering of the resulting list. Let’s show the code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="c1"># values is a function, i.e. list with three elements</span>
    <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="k">print</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">my_callback</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>What happens here is that we define a function called “my_callback” which returns the third value in a list. That’s a fairly boring function, but we provide this function as a <em>callback</em> to the sorted() function, namely as the “key” parameter. As sorted() calls the key function for each element and uses that to define the ordering, we end up with the resulting list being sorted by the third value in the functions, i.e. the value “c”.</p>
</div>
<div class="section" id="sorting-in-c">
<h3>2.8.1.2.2. Sorting in C<a class="headerlink" href="#sorting-in-c" title="Permalink to this headline">¶</a></h3>
<p>In the chapter “Big O notation” we touched upon sorting in C using the built in “qsort” function. Here’s the code again:</p>
<blockquote>
<div><div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">comparison</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="o">*</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span> <span class="o">-</span> <span class="o">*</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">my_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span> <span class="p">};</span>
    <span class="n">qsort</span><span class="p">(</span><span class="n">my_array</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">),</span> <span class="n">comparison</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">my_array</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>Now, what happens here is the following:</p>
<ul class="simple">
<li>Line 4: We define a function which we use as our callback. It takes two parameters (const void pointers, i.e. pointers to any unknown data) and returns an int, whereby the two input parameters are the values to compare and the return value should describe how to sort them, such that negative value means the first parameter should be before the second.</li>
<li>Line 6: We cast the void pointers to int pointers (as we know our data is ints) and subtract a from b such that if a is less than b, it will be before b in the result.</li>
<li>Line 12: We call the qsort() standard library function which takes a <em>pointer to a function</em> as the fourth parameter. Pointer to a function is how a callback function is defined and used in C.</li>
</ul>
</div>
<div class="section" id="callbacks-in-javascript">
<h3>2.8.1.2.3. Callbacks in Javascript<a class="headerlink" href="#callbacks-in-javascript" title="Permalink to this headline">¶</a></h3>
<p>We already had an example when we defined a function to call at the page load phase:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="cm">/* my code goes here */</span>
<span class="p">}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">init</span><span class="p">;</span>
</pre></div>
</div>
<p>Here, our function “init” is defined as the callback function for the object “window”.</p>
</div>
</div>
<div class="section" id="anonymous-functions">
<h2>2.8.1.3. Anonymous functions<a class="headerlink" href="#anonymous-functions" title="Permalink to this headline">¶</a></h2>
<p>In some languages including Python and Javascript, we can define functions <em>anonymously</em>, meaning we don’t have to really define a function with a name, but merely a function without one. Going back to our Python example about providing a callback function as the “key” parameter, we wrote a function to return the third element of a list but this function is actually very simple. We can shorten our code by doing the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">])[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>In Python, <em>lambda</em> is a key word for defining an anonymous function: instead of using “key=my_callback”, we set “key” to a lambda function, which is otherwise defined like a regular function but we skip the “return” keyword. This will have the same behaviour as our earlier example where we defined a named function as the callback.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="func2.html" title="2.8.2. Functional programming"
             >next</a> |</li>
        <li class="right" >
          <a href="func_index.html" title="2.8. Some concepts around functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Software Development: A Pragmatic Approach 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch2_index.html" >2. Stage 1</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="func_index.html" >2.8. Some concepts around functions</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Antti Salonen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>