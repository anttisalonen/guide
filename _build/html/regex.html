<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.3. Regular expressions &#8212; guide 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Javascript" href="js_index.html" />
    <link rel="prev" title="2.2. Version control" href="vcs.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="regular-expressions">
<h1>2.3. Regular expressions<a class="headerlink" href="#regular-expressions" title="Permalink to this headline">¶</a></h1>
<p>A lot can be said about regular expressions. I&#8217;ll stick to the essentials, bare minimum in this chapter.</p>
<p>Regular expressions are an extension to the usual search and replace. For example, you might want to find any line in a file that ends with the digit 9:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ grep <span class="s2">&quot;9</span>$<span class="s2">&quot;</span> test.txt <span class="p">|</span> head
-8.687820 -6.930905 -8.731439
-6.532205 -8.706914 <span class="m">1</span>.642039
<span class="m">3</span>.052381 <span class="m">2</span>.971625 -0.620359
<span class="m">5</span>.722527 -7.593573 -8.653239
<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>&#8216;grep&#8217; by default assumes the search string provided to it is a regular expression. The string &#8220;9$&#8221; consists of two characters: 9 and $. $ is called an anchor character: it designates the end of the line. Hence, searching for &#8220;9$&#8221; means that grep will output all lines where 9 is the last character in the line.</p>
<p>A more complex example is wanting to search any negative numbers in the file between -1.0 and -1.3:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ grep <span class="s2">&quot;\-1\.[012][0-9]*&quot;</span> test.txt <span class="p">|</span> head
<span class="m">0</span>.094081 -6.537027 -1.189798
<span class="m">4</span>.145320 -1.276905 -6.513201
-1.240556 -2.562810 -8.189995
-1.114494 -4.974068 -5.414513
<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>This command outputs any line in which a number between -1.0 and -1.3 was found. Let&#8217;s go through the regular expression &#8220;\-1\.[012][0-9]*&#8221; piece by piece:</p>
<p>\- means &#8220;match the minus character&#8221;. We need a backslash before the minus character because otherwise grep would confuse it with a switch. The backslash is the escape character; in this case it means &#8220;treat the following character as the literal minus character&#8221;.</p>
<p>1 means we search for a 1.</p>
<p>\. means the period character, i.e &#8216;.&#8217;. This needs to be escaped using backslash because in regular expressions, the period character is short hand for &#8220;any character&#8221;. However in this case we mean the actual period character, hence the backslash.</p>
<p>[012] means that after the period character we search for either a 0, 1 or 2.</p>
<p>[0-9] means that after the previous character (0, 1 or 2) we search for any digit.</p>
<ul class="simple">
<li>means that the previous search must be repeated as often as possible, i.e. for any digits until some other character is found.</li>
</ul>
<p>Hence, the regular expression &#8220;\-1\.[012][0-9]*&#8221; means &#8220;search for a string that starts with a minus character, has a 1, followed by a period, followed by either 0, 1 or 2, followed by zero or more digits&#8221;.</p>
<p>It may become more obvious if we pass the switch &#8220;-o&#8221; to grep, which means that only the matching strings are output, not the full line of a match:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>grep -o <span class="s2">&quot;\-1\.[012][0-9]*&quot;</span> test.txt <span class="p">|</span> head
-1.189798
-1.276905
-1.240556
-1.114494
<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Now, grep only outputs the strings that were matched, i.e. the numbers between -1.0 and -1.3.</p>
<p>As unplausible as it may sound, experienced programmers are often able to derive a correct regular expression for a certain use case with ease, though sometimes, especially with more complex expressions, some debugging may be needed. This comes with practice; an experienced programmer often uses regular expressions several times every day.</p>
<p>Regular expressions aren&#8217;t limited to grep, but are available in most programming languages as well as other Unix tools such as sed. To get a refresher on sed, you might, for example, use sed to search and replace the string &#8220;123&#8221; with &#8220;456&#8221;:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sed -e <span class="s1">&#39;s/123/456/g&#39;</span> test.txt &gt; new_file.txt
</pre></div>
</div>
<p>Now, let&#8217;s say you had a more advanced use case, for example replacing any negative number with 0.0. This can be achieved using regular expressions with &#8216;sed&#8217;:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sed -e <span class="s1">&#39;s/-[0-9.]*/0.0/g&#39;</span> test.txt
<span class="m">7</span>.269553 <span class="m">3</span>.427526 <span class="m">6</span>.633603
<span class="m">1</span>.980206 <span class="m">0</span>.0 <span class="m">0</span>.0
<span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
<span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
<span class="m">0</span>.0 <span class="m">6</span>.908667 <span class="m">4</span>.418877
<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Let&#8217;s go through this piece by piece.</p>
<ul class="simple">
<li>&#8216;s/-[0-9,]*/0.0/g&#8217; - four components, delimited by &#8216;/&#8217;. The first one, &#8216;s&#8217; means search and replace.</li>
</ul>
<p>The second component is -[0-9.]*:</p>
<ul class="simple">
<li>- First find a minus character</li>
<li>[0-9.] Then find any character that is a number (0-9), or a period. Square brackets denote &#8220;any of&#8221;.</li>
<li>* Repeat the previous as many times as possible. Hence, of the string &#8220;-1.234 2.000&#8221;, the part &#8220;-1.234&#8221; would be matched because it starts with a minus character, followed by several digits and a period. After reaching the space character the search terminates.</li>
</ul>
<p>The third component is 0.0: Whatever was matched in the search will be replaced by this.</p>
<p>The fourth component is &#8216;g&#8217; again, i.e. apply this search as many times as possible for each line. This means that for example for line &#8220;-1.234 -2.000 1.23&#8221; the both matching instances will be replaced (both &#8220;-1.234&#8221; and &#8220;-2.000&#8221; will be replaced by &#8220;0.0&#8221;).</p>
<p><em>Exercise</em>: Using your generated file of 10,000 functions, write a &#8216;sed&#8217; command to replace all digits after the decimal point with a 0. For example, the line &#8220;1.980206 -3.655827 -2.629755&#8221; should become &#8220;1.0 -3.0 -2.0&#8221;.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="unix_index.html">2. Unix shell</a><ul>
      <li>Previous: <a href="vcs.html" title="previous chapter">2.2. Version control</a></li>
      <li>Next: <a href="js_index.html" title="next chapter">3. Javascript</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/regex.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Antti Salonen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/regex.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>