

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1.2.1. Quadratic formula in C &#8212; Software Development: A Pragmatic Approach 0.1 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1.2.2. Lots of quadratic equations" href="quad1b.html" />
    <link rel="prev" title="1.2. Quadratic formula" href="quad_index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="quad1b.html" title="1.2.2. Lots of quadratic equations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quad_index.html" title="1.2. Quadratic formula"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Software Development: A Pragmatic Approach 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch1_index.html" >1. The beginning</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="quad_index.html" accesskey="U">1.2. Quadratic formula</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.2.1. Quadratic formula in C</a><ul>
<li><a class="reference internal" href="#pointers">1.2.1.1. Pointers</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quad_index.html"
                        title="previous chapter">1.2. Quadratic formula</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="quad1b.html"
                        title="next chapter">1.2.2. Lots of quadratic equations</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quad1.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quadratic-formula-in-c">
<h1>1.2.1. Quadratic formula in C<a class="headerlink" href="#quadratic-formula-in-c" title="Permalink to this headline">¶</a></h1>
<p>Now that we’re able to create some C programs, let’s try a bit more complicated one. Let’s write a program to solve a quadratic equation.</p>
<p>As you may know, a quadratic equation is an equation ax<sup>2</sup>+bx+c=0, whereby a, b and c are constants. A quadratic function, when plotted, may look e.g. like this:</p>
<img alt="_images/quad.png" src="_images/quad.png" />
<p>Solving the quadratic equation provides the <em>roots</em> of the equation, i.e. the x values at which the x-axis is crossed. For the above function, the roots are at points x=-0.72 and x=1.39. There may be 0, 1 or 2 roots, and the formula to solve the quadratic equation is:</p>
<img alt="_images/formula.png" src="_images/formula.png" />
<p>This mathematical formula can be implemented in C. For example like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">b</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">-</span> <span class="mf">4.0f</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0f</span> <span class="o">*</span> <span class="n">a</span><span class="p">);</span>
</pre></div>
</div>
<p>The +/- part of the formula causes up to two possible solutions for x to be available; the above C formulation only identifies one.</p>
<p>There may be 0, 1 or 2 roots; the case of 0 roots occurs when the part for which the square root is calculated (also called the <em>determinant</em>) is negative, as a negative number cannot have a real square root. The case of 1 root occurs when the determinant is exactly 0.</p>
<p>The C function sqrt() is part of the standard C library but there’s a twist: in order to use the function, the header file &lt;math.h&gt; should be included. Furthermore, you may need to link your program against the <em>math library</em> by passing “-lm” to your C compiler when compiling.</p>
<p><em>Exercise</em>: Write a program that solves the quadratic equation for a=3.0, b=-2.0, c=-3.0. Print out the number of roots as well as all found roots.</p>
<p>Ok, so we now have a program that solves the quadratic equation for some values. What if I asked you to solve the quadratic equation for three, or ten, different functions (a, b and c values), in the same program? There are several ways to approach this but one thing we should avoid is copy-pasting the code to solve the equation multiple times. Instead we should capture this logic in a <em>function</em>.</p>
<p>What we require is a function which takes a, b and c as input parameters and returns the roots, as well as an indication as to how many roots were found. Once we have this function we can then call it with different parameters and write out the information about the roots after each call.</p>
<p>Now, there are a few ways this could be approached. An interesting limitation we arrive at is that C can only return one value in a function. However, we can still write our function by using <em>pointers</em>.</p>
<div class="section" id="pointers">
<h2>1.2.1.1. Pointers<a class="headerlink" href="#pointers" title="Permalink to this headline">¶</a></h2>
<p>Every variable in C has an <em>address</em> in memory. Speaking in metaphors, if a variable was a house, then the value of the variable would be the contents of the house, and the memory address would be the address of the house. A pointer in C is a variable for which the value can be the address of another variable.</p>
<p>Here’s an example:</p>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
        <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>
        <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">45</span><span class="p">;</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;The value of a is: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;The value of p is: %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;The value of what p points to is: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>Line 5: We define an integer variable called “a”.</li>
<li>Line 6: We define a variable called “p” which is a pointer to an integer. The asterisk (“*”) means the type is a pointer.</li>
<li>Line 7: We assign a value to “p”, namely <em>the address of</em> a. The ampersand (“&amp;”) means “address of”.</li>
<li>Line 8: We assign a value to <em>what “p” points to</em>. The asterisk operator (“*”) means <em>dereferencing</em> the pointer.</li>
<li>Lines 9-11: We print out the values of “a”, “p” and “*p”.</li>
</ul>
<p><em>Exercise</em>: What would you expect the output to be? Try it out.</p>
<p>In this example, using the pointer wasn’t necessary because if we wanted to change the value of “a”, we could have done it directly. However, if you want to change the value of a variable of another function then pointers become useful. What you can do is pass the address of a variable to the other function. The other function can then modify the value of that variable. In this way we can “return” multiple values from a single function.</p>
<p>The following example illustrates the principle:</p>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">increment_by_one</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p1</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">p2</span><span class="p">)</span>
<span class="p">{</span>
        <span class="o">*</span><span class="n">p1</span> <span class="o">=</span> <span class="o">*</span><span class="n">p1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="o">*</span><span class="n">p2</span> <span class="o">=</span> <span class="o">*</span><span class="n">p2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="n">increment_by_one</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;The value of a is: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;The value of b is: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>Lines 3-7: We define a function called “increment_by_one” which doesn’t have a return value and takes two input parameters. Both input parameters are pointers to int.</li>
<li>Line 5: We assign the value of what “p1” points to plus one to what “p1” points to.</li>
<li>Line 6: The same for “p2”.</li>
<li>Lines 11-13: In our main function, we define two int variables, and pass the addresses of these to the “increment_by_one” function.</li>
</ul>
<p>Here, we have a function that takes two pointers and increments the values of the variables that are pointed to by one.</p>
<p>We should now have what we need to create a function that solves the quadratic equation.</p>
<p><em>Exercise</em>: Write such a function. It should have parameters a, b and c (all floats) as well as r1 and r2 (pointers to floats). It should return an int which is the number of roots found for the given function. In other words, its function <em>signature</em> should be e.g. “int quad(float a, float b, float c, float *r1, float *r2)”. In your main function, define the variables a, b, c, r1, r2 and number_of_roots. Set the variables such that you can solve the quadratic equation for a=3.0, b=-2.0, c=-3.0. Print out the roots found. Only call printf() within main.</p>
<p><em>Exercise</em>: Modify your code to solve the quadratic equation for a=3.0, b=-2.0, c=3.0 (positive c instead of negative). This equation has no roots. What happens if you print out the values of r1 and r2?</p>
<p>Now that we have a function that can solve the quadratic equation, we should try solving several equations and outputting the results. For the next exercise, let’s assume our goal is to provide the roots for three different quadratic equations, namely:</p>
<ul class="simple">
<li>x<sup>2</sup>-2x-3</li>
<li>-x<sup>2</sup>-x-1</li>
<li>2x<sup>2</sup>+2x+0.5</li>
</ul>
<p>How should we structure the code for this? We should keep our solver function clean of side effects by not using printf() in it. Indeed, the ideal main function for this task could look like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">solve_and_print</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0f</span><span class="p">);</span>
    <span class="n">solve_and_print</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
    <span class="n">solve_and_print</span><span class="p">(</span><span class="mf">2.0f</span><span class="p">,</span> <span class="mf">2.0f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In other words, for each of the functions to find the roots for, we call a function which does the solving and the printing. We already have a function that can solve the equation so what’s left to implement is capturing the behaviour of using the solver function and printing the results.</p>
<p><em>Exercise</em>: Write a program that solves the quadratic equation for the three functions listed above, and prints the results. Your main function should look like the one above. The function solve_and_print() should take three parameters, a, b and c, call the solver function and print the results of the solver function.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="quad1b.html" title="1.2.2. Lots of quadratic equations"
             >next</a> |</li>
        <li class="right" >
          <a href="quad_index.html" title="1.2. Quadratic formula"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Software Development: A Pragmatic Approach 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch1_index.html" >1. The beginning</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="quad_index.html" >1.2. Quadratic formula</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Antti Salonen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>