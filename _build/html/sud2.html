<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>15.2. Containers for Sudoku &#8212; guide 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="15.3. Sudoku Puzzle class" href="sud3.html" />
    <link rel="prev" title="15.1. Introduction to Sudoku" href="sud1.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="containers-for-sudoku">
<h1>15.2. Containers for Sudoku<a class="headerlink" href="#containers-for-sudoku" title="Permalink to this headline">Â¶</a></h1>
<p>Recall that our main idea to solve Sudoku (constraint propagation) revolves around the idea of checking how many possible values a cell has, and if it has only one possible value, set it.</p>
<p>We then discussed the concept of a cell - which may either have a value, or at least we should know which values it could and could not have.</p>
<p>After our discussion around classes we now almost have enough to implement a class &#8220;Cell&#8221;, which represents a cell and the value it has or could have. Before we implement this, let&#8217;s consider for a moment how we could achieve this concept of potential values.</p>
<p>If we know which value a cell has, it&#8217;s no different from an integer. However, if it can have multiple values, then it can effectively be represented a set of multiple integers.</p>
<p><em>Exercise</em>: What ways or data structures can you think of to store this information?</p>
<p>We&#8217;ve talked about arrays before, but arrays generally have a fixed size. We could, however, e.g. have an array of nine integers, each integer having a value between 1 and 9, or -1 if one or more numbers have been eliminated.</p>
<p>Alternatively we could use a dynamically sized array, and only store the possible values there. If only one value is stored, then we know the value in the cell.</p>
<p>Furthermore, we could use a <em>set</em>, i.e. a <em>binary search tree</em> which is similar to vector in the sense that it stores values, but with the feature of having a faster time complexity for e.g. lookup functions than a vector (O(log n) vs. O(n)).</p>
<p>The following quickly demonstrates the three approaches in C++, with the example of attempting to find a number 3 in an array as well as checking the size:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">bool</span> <span class="n">found</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">size</span><span class="p">;</span>

	<span class="c1">// C type array</span>
	<span class="kt">int</span> <span class="n">old_type_array</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">};</span>
	<span class="n">found</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="n">old_type_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">found</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="n">old_type_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">size</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Found: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">found</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;; size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">size</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

	<span class="c1">// C++ has a specific array type</span>
	<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">arr</span><span class="p">;</span>
	<span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
	<span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">found</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">arr</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">arr</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="n">arr</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
	<span class="n">size</span> <span class="o">=</span> <span class="n">arr</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Found: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">found</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;; size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">size</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
	<span class="c1">// printing all values in the array:</span>
	<span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">v</span> <span class="p">:</span> <span class="n">arr</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="c1">// C++ vector</span>
	<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span><span class="p">;</span>
	<span class="n">vec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="n">vec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
	<span class="n">vec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
	<span class="n">found</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">find</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
	<span class="n">size</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Found: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">found</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;; size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">size</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
	<span class="c1">// vec.clear() would remove all elements in the vector</span>
	<span class="c1">// The following line removes the element 3 from the vector</span>
    <span class="n">vec</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">remove</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">3</span><span class="p">),</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">vec</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

	<span class="c1">// printing all values in the vector:</span>
	<span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">v</span> <span class="p">:</span> <span class="n">vec</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="c1">// C++ set</span>
	<span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">s</span><span class="p">;</span>
	<span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
	<span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
	<span class="n">found</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="n">s</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
	<span class="n">size</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Found: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">found</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;; size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">size</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
	<span class="c1">// s.clear() would remove all elements in the set</span>
	<span class="n">s</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

	<span class="c1">// printing all values in the set:</span>
	<span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">v</span> <span class="p">:</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Vector and set also allow initialisation using the {} notation like arrays, but the above demonstrates the functions to add values in them explicitly.</p>
<p>Most of this is possibly rather self explanatory, but it seems two pieces of code are of specific interest:</p>
<ul class="simple">
<li>Erasing an element in a vector; this is the so-called <em>erase-remove</em> idiom which is the (admitteldy clunky) way in C++ to remove an element from a vector. It uses std::remove(), a generic function in the C++ standard template library (STL) which takes <em>iterators</em> as parameters, which are provided by the standard containers in C++ for iterating over the containers and conceptually are pointers pointing to an element. This is passed to vec.erase() which will then remove the element from the vector. E.g. the first element in a vector or a set can be accessed using &#8220;*vec.begin()&#8221;.</li>
<li>In the for loops, we use the construct &#8220;const auto &amp;v&#8221;. This means &#8220;v should be a reference to a constant variable of automatically inferred type&#8221;. What referencing (&#8220;&amp;&#8221;) means in practice is that we don&#8217;t copy the data, possibly saving some CPU cycles. What &#8220;const&#8221; means is that we promise not to modify the data within the container. Overall this means we simply want to read the contents. If we wanted to, say, modify the element then we should remove &#8220;const&#8221;. If we wanted to construct a copy of the element (e.g. for modifying it but without modifying the element in the container) then we should remove the &#8220;&amp;&#8221;.</li>
</ul>
<div class="section" id="cell-class">
<h2>15.2.1. Cell class<a class="headerlink" href="#cell-class" title="Permalink to this headline">Â¶</a></h2>
<p>Now, we should have everything we need for a Cell class. It should have the following functionality:</p>
<ul class="simple">
<li>On construction, it should store the numbers from 1 to 9.</li>
<li>It should be possible to <em>set</em> it, i.e. remove all values except one (which is given as a parameter).</li>
<li>It should be possible to check whether a cell is valid, i.e. whether it has at least one value still available.</li>
<li>It should be possible to <em>eliminate</em> a value, i.e. remove a value if it exists. For convenience, let&#8217;s have the function &#8220;eliminate&#8221; return false if the last number in the cell was eliminated and true otherwise.</li>
<li>It should be possible to ask whether it contains only one number, or multiple.</li>
<li>It should be possible to retrieve the current values.</li>
</ul>
<p>More specifically, it should correctly implement an interface as used by this program:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="cm">/* Cell class declaration and definition goes here */</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Cell</span> <span class="n">c1</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c1</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>   <span class="c1">// should output &quot;9&quot;</span>
    <span class="kt">bool</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">c1</span><span class="p">.</span><span class="n">eliminate</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c1</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>   <span class="c1">// should output &quot;8&quot;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ret</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>          <span class="c1">// should output &quot;1&quot; (true)</span>
    <span class="n">c1</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c1</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>   <span class="c1">// should output &quot;1&quot;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c1</span><span class="p">.</span><span class="n">valid</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>   <span class="c1">// should output &quot;1&quot; (true)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">c1</span><span class="p">.</span><span class="n">has_one</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span> <span class="c1">// should output &quot;1&quot; (true)</span>
    <span class="k">auto</span> <span class="n">values</span> <span class="o">=</span> <span class="n">c1</span><span class="p">.</span><span class="n">get_values</span><span class="p">();</span>     <span class="c1">// return type is implementation specific (e.g. either vector&lt;int&gt; or set&lt;int&gt;)</span>
    <span class="k">for</span><span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">v</span> <span class="p">:</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>        <span class="c1">// should output &quot;3&quot;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><em>Exercise</em>: Implement the Cell class. You can use any data structure you like although either vector or set should be the easiest ones. Test it with the test code above.</p>
<p>We may need some more member functions for our Cell class later, but we can implement these as we go along.</p>
</div>
<div class="section" id="digression-debugging">
<h2>15.2.2. Digression: debugging<a class="headerlink" href="#digression-debugging" title="Permalink to this headline">Â¶</a></h2>
<p>Let&#8217;s assume you try to run your program, and it crashes. What&#8217;s going on?</p>
<p>There are a few ways to find out. In the worst case, you simply get a segmentation fault, i.e. tried to access memory your program didn&#8217;t have access to. There are a few ways to debug this:</p>
<ol class="arabic simple">
<li>Code inspection and hardening - going through the code and adding useful <em>assertions</em> where necessary.</li>
<li>Debug printf - inserting printf (or std::cout) calls to various places in your code, seeing which one gets executed, allowing you to pinpoint the line that is the cause for the crash.</li>
<li>Using a <em>debugger</em> to show the root cause of the crash and the state of the program at the time of crash.</li>
</ol>
<p>Assertions seem like going through in more detail. For example, if you have an int variable named &#8220;foo&#8221;, and you assume it should always be between 0 and 5, you can use this code (after #including &lt;assert.h&gt;):</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">assert</span><span class="p">(</span><span class="n">foo</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">foo</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>Now, what happens is the program will always check, when executing the statement, whether your statement is true and if not, will immediately crash the program. This is helpful for detecting cases where your assumptions were wrong.</p>
<p>Similar to assertion, and relevant in C++, is <em>bounds checking</em>. Normally, when you access an element in an array (with e.g. &#8220;a[3]&#8221;), there&#8217;s nothing stopping you from trying to access an element beyond the size of the array, leading to undefined behaviour. At a small (typically negligible these days) runtime cost you can, for the classes std::vector and std::array, have the bounds checked at each access by using e.g. &#8220;a.at(3)&#8221; instead. Now code will be called that will check whether the element is within the bounds and throw an exception if not, hopefully saving lots of debugging time in the future.</p>
<p>Finally, <em>debuggers</em> are programs which execute your program in a controlled environment with the ability to track and stop the program executiuon when necessary. One potentially useful debugger is <em>gdb</em>. There are many ways to use it but one way is to get a <em>backtrace</em> of the function calls leading to the crash, i.e. all the function calls in the stack at the time the crash occurred. This can be achieved by following these steps:</p>
<blockquote>
<div><ul class="simple">
<li>Compile the program with &#8220;-g3&#8221; to get include debug data in the program which will be used by the debugger e.g. to display line numbers</li>
<li>Possibly do not compile with optimisations, i.e. do not compile with &#8220;-O2&#8221; as this may cause the debugger output to be very different</li>
<li>Instead of running the application with simply &#8221;./program abc&#8221;, run &#8220;gdb &#8211;args ./program abc&#8221;. This will launch gdb (assuming it&#8217;s installed)</li>
<li>gdb will display a prompt, allowing you to enter commands. Simply enter the command &#8220;r&#8221; (for &#8220;run&#8221;) and hit enter. This will run the program.</li>
<li>If the program crashes, gdb will let you know and also show the line that caused the crash. With the command &#8220;bt&#8221; (&#8220;backtrace&#8221;) you can see the function stack leading up to the call.</li>
<li>You can exit gdb with &#8220;q&#8221;.</li>
</ul>
</div></blockquote>
<p>Here&#8217;s an example gdb session:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Reading</span> <span class="n">symbols</span> <span class="kn">from</span> <span class="nn">.</span><span class="o">/</span><span class="n">segv</span><span class="o">...</span><span class="n">done</span><span class="o">.</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">r</span>
<span class="n">Starting</span> <span class="n">program</span><span class="p">:</span> <span class="o">./</span><span class="n">segv</span> <span class="mi">10</span> <span class="mi">10000</span>

<span class="n">Program</span> <span class="n">received</span> <span class="n">signal</span> <span class="n">SIGSEGV</span><span class="p">,</span> <span class="n">Segmentation</span> <span class="n">fault</span><span class="o">.</span>
<span class="mh">0x0000000000400825</span> <span class="ow">in</span> <span class="n">run</span> <span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">loop_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span> <span class="n">at</span> <span class="n">segv</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">9</span>
<span class="mi">9</span>           <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">bt</span>
<span class="c1">#0  0x0000000000400825 in run (size=10, loop_size=10000) at segv.cpp:9</span>
<span class="c1">#1  0x00000000004008c1 in main (argc=3, argv=0x7fffffffe7d8) at segv.cpp:18</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we can see the program crashed at line segv.cpp:9, in function &#8220;run&#8221;, which was entered from function &#8220;main&#8221; at segv.cpp:18.</p>
<p>Debuggers can do a lot more, e.g. set breakpoints, display variable names, and more.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">15.2. Containers for Sudoku</a><ul>
<li><a class="reference internal" href="#cell-class">15.2.1. Cell class</a></li>
<li><a class="reference internal" href="#digression-debugging">15.2.2. Digression: debugging</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="sud_index.html">15. Learning to program using Sudoku</a><ul>
      <li>Previous: <a href="sud1.html" title="previous chapter">15.1. Introduction to Sudoku</a></li>
      <li>Next: <a href="sud3.html" title="next chapter">15.3. Sudoku Puzzle class</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/sud2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Antti Salonen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/sud2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>