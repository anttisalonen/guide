

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.2.2. Lots of quadratic equations &#8212; Software Development: A Pragmatic Approach 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1.2.3. Quadratic formula in Python" href="quad2.html" />
    <link rel="prev" title="1.2.1. Quadratic formula in C" href="quad1.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="quad2.html" title="1.2.3. Quadratic formula in Python"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quad1.html" title="1.2.1. Quadratic formula in C"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Software Development: A Pragmatic Approach 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch1_index.html" >1. Introduction</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="quad_index.html" accesskey="U">1.2. Quadratic formula</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.2.2. Lots of quadratic equations</a><ul>
<li><a class="reference internal" href="#files">1.2.2.1. Files</a></li>
<li><a class="reference internal" href="#larger-files">1.2.2.2. Larger files</a></li>
<li><a class="reference internal" href="#aside-arrays">1.2.2.3. Aside: Arrays</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quad1.html"
                        title="previous chapter">1.2.1. Quadratic formula in C</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="quad2.html"
                        title="next chapter">1.2.3. Quadratic formula in Python</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quad1b.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lots-of-quadratic-equations">
<h1>1.2.2. Lots of quadratic equations<a class="headerlink" href="#lots-of-quadratic-equations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="files">
<h2>1.2.2.1. Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>Now that we&#8217;re able to solve multiple quadratic equations, let&#8217;s step it up one notch. Let&#8217;s have the goal of calculating the roots of 10,000 quadratic equations and finding the function with the largest root, whereby the definitions of all functions are stored in a file.</p>
<p>To get started, here&#8217;s a file with one function definition in it: <a class="reference download internal" href="_downloads/test1.txt" download=""><code class="xref download docutils literal"><span class="pre">download</span> <span class="pre">text</span> <span class="pre">file</span></code></a></p>
<p>This file looks like the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>-2.892091 -2.197815 -4.943323
</pre></div>
</div>
<p>In other words, it&#8217;s a file with one line. The line has three floating point numbers. The numbers represent a quadratic function with values a, b and c respectively.</p>
<p>The C standard library provides an interface for opening, reading, writing and closing files. A file can be opened like this:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="kt">FILE</span> <span class="o">*</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">fp</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Could not open file.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In other words, there&#8217;s a standard function called fopen() (for &#8220;file open&#8221;) which takes two parameters. The first parameter is the path and name of the file to open. If no path is given, it is expected that the file is located in the current working directory. The second parameter takes a string which identifies what should be done with the file. The string &#8220;r&#8221; means the file should be opened for reading only. The string &#8220;w&#8221; would mean the file is opened for writing; opening a file for writing this way would delete its previous contents. The function fopen() returns a value of type pointer to &#8220;FILE&#8221;. &#8220;FILE&#8221; is a special type which can be used when reading or writing to a file, or closing it.</p>
<p>If the file could not be opened, a special pointer called <em>NULL pointer</em> is returned instead. <em>NULL pointer</em> is a pointer which is invalid. We can check whether the pointer is a NULL pointer by using the code like above. The convention is that error messages are written out to <em>standard error</em> instead of <em>standard output</em> using the fprintf() function like above for reasons that will be expanded upon later in this book.</p>
<p><em>Exercise</em>: Look up the man page for fopen().</p>
<p>Once you have a file open, you can close it using the following code:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="n">fclose</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
</pre></div>
</div>
<p><em>Exercise</em>: Look up the man page for fclose().</p>
<p>How about reading a file? There are several ways to do this. One way we could use is to use the function fread(), but in our case, the function fscanf() suits better. fscanf() is a bit like the inverse of printf(): it takes a format string and the addresses of variables where the contents of the string should be stored, according to the placeholders in the format string. An example is probably the best way to illustrate this:</p>
<div class="highlight-c"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kt">float</span> <span class="n">a</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">b</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">c</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">num_read</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s">&quot;%f %f %f&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">num_read</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Could not read three numbers.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Let&#8217;s go through this line by line:</p>
<ul class="simple">
<li>Lines 1-3: We define three variables of type float.</li>
<li>Line 4: We use fscanf() to <em>read in</em> the contents of the file. We pass fscanf() five parameters: The first one is the FILE pointer. The second one is the format string. In our format string, we say we&#8217;re expecting the file to contain three floating point numbers, separated by a space. The last three parameters are the addresses of our floating point variables. We tell fscanf() that we&#8217;d like to store the contents of the three floating point numbers from the file to these variables.</li>
<li>Line 5: We check the <em>return value</em> of fscanf(). fscanf() returns the number of variables for which the data could be stored. We passed in three addresses so we expect it to have stored data for three variables. If the return value is not three then something went wrong during reading of the file; for example, only two numbers were available in the file.</li>
</ul>
<p><em>Exercise</em>: Look up the man page for fread() and fscanf().</p>
<p>We should now have what we need in order to read a quadratic equation definition from the file referenced above, and calculate its roots.</p>
<p><em>Exercise</em>: Download the above text file in your computer. Add code in your program to open that file. Read in the contents of that file to three variables. Use your previously written function solve_and_print() to solve that quadratic equation and print the roots.</p>
</div>
<div class="section" id="larger-files">
<h2>1.2.2.2. Larger files<a class="headerlink" href="#larger-files" title="Permalink to this headline">¶</a></h2>
<p>Now that we&#8217;re able to read in one quadratic equation definition from a file, let&#8217;s try this for 10,000 equations. See this file: <a class="reference download internal" href="_downloads/test.txt" download=""><code class="xref download docutils literal"><span class="pre">download</span> <span class="pre">text</span> <span class="pre">file</span></code></a></p>
<p>That file contains 10,000 lines, each containing three floating point numbers, each representing a, b and c respectively. Let&#8217;s see if we can find the equation with the largest root.</p>
<p><em>Exercise</em>: Download the above file. Modify your program to open that file. Add a loop in your program to loop through your code that reads in the values a, b and c and solves the root for that quadratic equation such that your program reads through all the 10,000 equations and calculates the root for all of them. Note: you may want to <em>not</em> print out the roots for all equations as that could create a lot of output.</p>
</div>
<div class="section" id="aside-arrays">
<h2>1.2.2.3. Aside: Arrays<a class="headerlink" href="#aside-arrays" title="Permalink to this headline">¶</a></h2>
<p>While this problem can be solved without arrays, you may find it useful to use them.</p>
<p>An array simply contains multiple variables of the same type, such that the variables are all stored next to each other. They can be useful if you need multiple variables of the same type. In other words, instead of writing e.g.:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cm">/* don&#39;t do this */</span>
<span class="kt">int</span> <span class="n">a0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a1</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a2</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a3</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">a4</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
</pre></div>
</div>
<p>...you can write:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>(The text between /* and */ is a <em>comment</em>; you can use these to explain your code.) We don&#8217;t save very much typing with just five elements, but the more elements you have, the more is saved by using arrays.</p>
<p>Now we can try to find the equation with the largest root, i.e. the equation where we find a root that is arithmetically larger than any other root.</p>
<p><em>Exercise</em>: Find the equation with the largest root. To do this, you need to note the largest root by having a variable to store this <em>outside</em> the loop. For all the roots found for an equation, compare those roots with the largest root found so far. If the root for the current equation is larger than the largest found so far, make note of it by modifying the variable which holds the largest root. Similarly, keep track of the variables a, b and c for the equation with the largest root. Print the a, b and c values of the equation with the largest root at the end.</p>
<p>Phew! We&#8217;ve learned a lot in this chapter.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="quad2.html" title="1.2.3. Quadratic formula in Python"
             >next</a> |</li>
        <li class="right" >
          <a href="quad1.html" title="1.2.1. Quadratic formula in C"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Software Development: A Pragmatic Approach 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch1_index.html" >1. Introduction</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="quad_index.html" >1.2. Quadratic formula</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Antti Salonen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>