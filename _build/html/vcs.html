

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1.3.3. Version control &#8212; Learn Programming 0.1</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1.3.4. Regular expressions" href="regex.html" />
    <link rel="prev" title="1.3.2. Unix shell scripting" href="unix2.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="regex.html" title="1.3.4. Regular expressions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="unix2.html" title="1.3.2. Unix shell scripting"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Learn Programming 0.1</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch1_index.html" >1. The beginning</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="unix_index.html" accesskey="U">1.3. Unix shell</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.3.3. Version control</a><ul>
<li><a class="reference internal" href="#creating-a-git-repository">1.3.3.1. Creating a git repository</a></li>
<li><a class="reference internal" href="#further-commits">1.3.3.2. Further commits</a></li>
<li><a class="reference internal" href="#git-reset">1.3.3.3. git reset</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="unix2.html"
                        title="previous chapter">1.3.2. Unix shell scripting</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="regex.html"
                        title="next chapter">1.3.4. Regular expressions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/vcs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="version-control">
<h1>1.3.3. Version control<a class="headerlink" href="#version-control" title="Permalink to this headline">¶</a></h1>
<p>Have you ever had the feeling that you want to make large scale changes to your code, but are afraid of breaking something? Has the thought crossed your mind that you could copy your source file or files to another directory, so that you have a backup in case something goes wrong?</p>
<p>If so then that’s perfectly normal. You might, however, imagine that if you were to work on a project for a longer time, say, several weeks, the number of backup directories would become difficult to have an overview of, and if you actually had to revert some changes from the past, it might be difficult to remember which directory contained which changes.</p>
<p>Version control systems (VCS) have been implemented to help solve these issues, as well as help developers collaborate on the same source code.</p>
<p>Version control systems have a long history, and I won’t go through all of that. Suffice to say, there are lots of different version control systems, and many developers have their own personal favorite.</p>
<p>This book will introduce the reader to one of the most useful ones, named git. Git was originally developed in 2005 by Linus Torvalds for the Linux kernel development, and has since become one of the most widely used version control systems worldwide.</p>
<p>Git has several upsides, and a significant one is how it scales: it’s very practical to use in hobby projects of individual developers, but is also being used to version control some of the world’s largest source code repositories.</p>
<p>There is lots that can be learned about git; this book will cover the basic fundamentals.</p>
<div class="section" id="creating-a-git-repository">
<h2>1.3.3.1. Creating a git repository<a class="headerlink" href="#creating-a-git-repository" title="Permalink to this headline">¶</a></h2>
<p>Let’s assume you have a directory which is otherwise empty except a file you’ve written, hello.py, which contains “print ‘hello world’”. Let’s turn this directory into a git repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git init
Initialized empty Git repository in /home/antti/book/my_project/.git/
</pre></div>
</div>
<p>Git has now initialised an empty repository. What this means in practice is that git has generated a new hidden directory called .git which we can see by running the command “ls -la”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ls -la
total <span class="m">16</span>
drwxr-xr-x <span class="m">3</span> antti users <span class="m">4096</span> Feb  <span class="m">9</span> <span class="m">00</span>:30 .
drwxr-xr-x <span class="m">8</span> antti users <span class="m">4096</span> Feb  <span class="m">9</span> <span class="m">00</span>:30 ..
drwxr-xr-x <span class="m">7</span> antti users <span class="m">4096</span> Feb  <span class="m">9</span> <span class="m">00</span>:30 .git
-rw-r--r-- <span class="m">1</span> antti users   <span class="m">20</span> Feb  <span class="m">9</span> <span class="m">00</span>:30 hello.py
</pre></div>
</div>
<p>What we want to do next is store the file hello.py in the git repository. After that it’ll be version controlled. We can do this by running the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add hello.py
</pre></div>
</div>
<p>This adds “hello.py” to <em>the staging area</em> which is an area describing what will be committed next. We can then run “git status” to see the current status:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master

Initial commit

Changes to be committed:
  <span class="o">(</span>use <span class="s2">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>

    new file:   hello.py
</pre></div>
</div>
<p>What this means is that if we were to commit our changes, i.e. create a new version, the new version would include a new file, namely hello.py. We can furthermore see the contents of the new commit by running “git diff –cached”.</p>
<p>Let’s create our commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git commit -m <span class="s2">&quot;initial commit&quot;</span>
<span class="o">[</span>master <span class="o">(</span>root-commit<span class="o">)</span> b279b4f<span class="o">]</span> initial commit
 <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>
 create mode <span class="m">100644</span> hello.py
</pre></div>
</div>
<p>The “-m” switch to git commit allows the user to enter the commit message, which should include a short description about what the commit is about. Since this is our initial commit, we label it as such.</p>
<p>After running the command, git tells us it’s created a new commit with the new file included. What happens behind the scenes is that git stores the necessary information about your file in the .git directory, such that it can be indexed and retrieved again when needed.</p>
<p>If we wanted to see the status of our repository now, we can run “git status” again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
nothing to commit, working tree clean
</pre></div>
</div>
<p>This means that the latest version git has stored matches the contents of our files (in this case, hello.py).</p>
</div>
<div class="section" id="further-commits">
<h2>1.3.3.2. Further commits<a class="headerlink" href="#further-commits" title="Permalink to this headline">¶</a></h2>
<p>Let’s now assume we want to make a change to our hello.py, by appending “print ‘hello world’” to it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">echo</span> <span class="s2">&quot;print &#39;hello world&#39;&quot;</span> &gt;&gt; hello.py
</pre></div>
</div>
<p>Now that we’ve modified our file, we can check status again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>

    modified:   hello.py

no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>The status now tells us that we’ve modified our file, and that the modifications aren’t included in any version controlled by git.</p>
<p>We can view the changes we’ve made by running “git diff”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git diff
diff --git a/hello.py b/hello.py
index a968078..01283b8 <span class="m">100644</span>
--- a/hello.py
+++ b/hello.py
@@ -1 +1,2 @@
 print <span class="s1">&#39;hello world&#39;</span>
+print <span class="s1">&#39;hello world&#39;</span>
</pre></div>
</div>
<p>The output suggests that there’s been a new line added to the end of hello.py.</p>
<p>We can now commit this change:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add hello.py
$ git commit -m <span class="s2">&quot;add printing hello world again&quot;</span>
<span class="o">[</span>master 43130e1<span class="o">]</span> add printing hello world again
 <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>
</pre></div>
</div>
<p>Now we already have two commits. We can see the commit log by running “git log”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log
commit 43130e10f89232f5ce542c4d864ff78e0a171796
Author: Antti Salonen &lt;ajsalonen@gmail.com&gt;
Date:   Fri Feb <span class="m">9</span> <span class="m">00</span>:42:07 <span class="m">2018</span> +0100

    add printing hello world again

commit b279b4fb109844ab0337bc906897f6e48a3c18cf
Author: Antti Salonen &lt;ajsalonen@gmail.com&gt;
Date:   Fri Feb <span class="m">9</span> <span class="m">00</span>:35:05 <span class="m">2018</span> +0100

    initial commit
</pre></div>
</div>
<p>The log will show the summary of each commit as well as the <em>commit hash</em>, which uniquely identifies each commit.</p>
</div>
<div class="section" id="git-reset">
<h2>1.3.3.3. git reset<a class="headerlink" href="#git-reset" title="Permalink to this headline">¶</a></h2>
<p>Now comes the interesting part: let’s say we want to go back to the previous version, before we added the second “print ‘hello world’” to the end of hello.py. One way to do this is the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git reset --hard b279b4f
HEAD is now at b279b4f initial commit
</pre></div>
</div>
<p>The command asks git to reset the state of the current working tree to the commit b279b4f (the first few characters of the commit hash we’re interested in). Git does this, and as part of that, replaces our hello.py with the old version:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat hello.py
print <span class="s1">&#39;hello world&#39;</span>
</pre></div>
</div>
<p>If we look at the log, we see the previous commit is no longer there:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log
commit b279b4fb109844ab0337bc906897f6e48a3c18cf
Author: Antti Salonen &lt;ajsalonen@gmail.com&gt;
Date:   Fri Feb <span class="m">9</span> <span class="m">00</span>:35:05 <span class="m">2018</span> +0100

    initial commit
</pre></div>
</div>
<p>If we wanted to get our changes back, we can, because we noted the commit hash:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git reset --hard 43130e10
HEAD is now at 43130e1 add printing hello world again
$ cat hello.py
print <span class="s1">&#39;hello world&#39;</span>
print <span class="s1">&#39;hello world&#39;</span>
</pre></div>
</div>
<p>This was a very short introduction to git. There will be more covered in this book later; you can also check the built in documentation for git by running “git –help” or the help for specific commands, for example “git status –help”.</p>
<p><em>Exercise</em>: Create a git repository and repeat the above commands yourself.</p>
<p><em>Exercise</em>: Use git to version control all your previous and future software development projects.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="regex.html" title="1.3.4. Regular expressions"
             >next</a> |</li>
        <li class="right" >
          <a href="unix2.html" title="1.3.2. Unix shell scripting"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Learn Programming 0.1</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ch1_index.html" >1. The beginning</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="unix_index.html" >1.3. Unix shell</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Antti Salonen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>